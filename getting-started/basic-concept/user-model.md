---
id: user-model
sidebar_position: 3
---

# 用户模型

## 简介[](#jian-jie)

在业务场景中，用户会通过多种渠道接触我们的产品或服务。在互联网业务中，用户会通过多终端( 手机、Pad、电脑、小程序 )体验我们的产品和服务；在金融业务中，用户会通过线上、线下和代理渠道购买我们的产品；在零售业务中，用户也会通过微信、淘宝、京东、抖音等平台购买我们的产品。因此，如何准确去识别用户是进行数据监控和用户营销的第一步，正确理解和使用用户模型也是使用GrowingIO平台的第一步。

GrowingIO系统默身份配置为 **用户 ID** 和 **设备 ID**
![](/img/用户模型-默认身份配置.png)


## 用户识别[](#yong-hu-shi-bie)

对系统采集的所有行为和属性，系统会根据行为和属性上的用户身份自动生成唯一用户标识( gio_id )。系统提供两种用户身份类型，分别为 **唯一身份 ID** 和 **弱身份 ID**。

| 类型        | 配置规则                    | 业务规则         |
|-------------|-----------------------------|------------------|
| 唯一身份 ID | 系统中有且仅有1个唯一身份ID | 如存在仅为唯一值 |
| 弱身份 ID   | 系统中存在至少1个唯一身份ID | 如存在可以为多值 |

如需使用多用户身份配置，请与GrowingIO工作人员联系

> 举例：
>
> 一般情况下，我们会将企业会员ID作为唯一身份ID，每一个企业会员具有唯一会员ID值；我们会将设备ID作为弱身份ID，每一个会员可能会有多个不同设备，如手机、pad、PC、小程序等。
> 对于以上配置，当某个用户使用设备 X 登陆APP并且注册账号 u1 成为会员，1年后该用户更换新的设备 Y 并使用该设备登陆会员账号 u1.
> 此时系统会识别该用户( gio_id: g1 )会员账号为 u1，且具有设备 X 和 设备 Y。

| gio_id | ids_$basic_userId | ids_$anonymous_user |
|--------|-------------------|---------------------|
| g1     | ['u1']            | ['X','Y']           |

### 识别规则

* 每个系统用户(非融合用户) **至少存在一个** 用户ID或设备ID
* 同一时刻，一个用户ID或设备ID仅对应 **唯一** 系统用户( gio_id )
* 系统无法将两个不同用户ID的系统用户进行合并
* 当一个设备ID被两个不同用户ID登陆时，系统会将 **设备ID** 从 **更早登陆** 的用户ID对应的 **系统用户** 上 **移动** 到 **最近登陆** 的用户ID对应的 **系统用户**
* 当设备ID和用户ID对应不同系统用户且设备ID历史无任何登陆行为时，如用户ID在该设备上登陆会触发两个不同系统用户 **融合**

### 融合规则

两个不同系统用户融合后，可以看到

* id_mapping_log 表中记录系统用户融合日志
* user 表中被融合系统用户 is_merged 字段标记为 1
* 被融合系统用户中全部用户身份融合到融合系统用户中
* 被融合系统用户和融合系统用户全部用户属性按最终归因进行合并
* 被融合系统用户和融合系统用户首次识别日期( $first_day )不发生变化
* 被融合系统用户历史行为不发生融合
* 被融合系统用户和融合系统用户的用户标签和所属群体画像不发生变化

支持历史数据融合，支持每日清洗过去 N 天历史数据，将用户行为融合到最终合并用户身上。

## 案例[](#an-li)

用户身份配置：
![](/img/用户模型-默认身份配置.png)

### 案例一：用户从匿名访问到注册登陆

| 时间 | 用户行为                                                                                                                                                                                                           |
|------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| T1   | **小明** 使用浏览器 **X** 匿名访问GrowingIO官网<br/>------------------------------------------<br/>设备X 未识别，创建系统用户 1 并记录到 user 表中<br/>在 event 表中记录该事件归属于系统用户 1         |
| T2   | **小明** 在浏览器 **X** 注册并登陆账户 **u1**<br/>------------------------------------------<br/>设备X 已识别，将用户ID归属与系统用户 1 并记录到 user 表中<br/>在 event 表中记录该事件归属于系统用户 1 |
| T3   | **小明** 在浏览器 **X** 上退出登陆，匿名访问GrowingIO官网<br/>------------------------------------------<br/>设备X 为系统用户 1<br/>在 event 表中记录该事件归属于系统用户 1                            |

![](/img/用户模型-匿名转登陆.png)

### 案例二：同一用户使用多设备

| 时间 | 用户行为                                                                                                                                                                                                                      |
|------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| T4   | **小明** 使用浏览器 **Y** 匿名访问GrowingIO官网<br/>------------------------------------------<br/>设备Y 未识别，创建系统用户 2 并记录到 user 表中<br/>在 event 表中记录该事件归属于系统用户 2                    |
| T5   | **小明** 在浏览器 **Y** 登陆账户 **u1**<br/>------------------------------------------<br/>系统用户 2 融合到 系统用户 1，将设备 Y 合并到系统用户 1 并记录到 user 表中<br/>在 event 表中记录该事件归属于系统用户 1 |
| T6   | **小明** 在浏览器 **Y** 上退出登陆，匿名访问GrowingIO官网<br/>------------------------------------------<br/>设备 Y 为系统用户 1<br/>在 event 表中记录该事件归属于系统用户 1                                      |

![](/img/用户模型-同一用户使用多设备.png)

### 案例三：多用户使用相同设备

| 时间 | 用户行为                                                                                                                                                                                                      |
|------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| T7   | **小红** 在浏览器 **X** 登陆账户 **u2**<br/>------------------------------------------<br/>创建系统用户 3，将设备 X 和用户ID u2 归属于系统用户 3，并记录到 user 表中<br/>在 event 表中记录该事件归属于系统用户 3 |
| T8   | **小明** 使用浏览器 **X** 匿名访问GrowingIO官网<br/>------------------------------------------<br/>设备 X 为系统用户 3<br/>在 event 表中记录该事件归属于系统用户 3                                               |
| T9   | **小明** 在浏览器 **X** 登陆账户 **u1**<br/>设备 X 从系统用户 3 移动到 系统用户 1，并记录在 user 表中<br/>在 event 表中记录该事件并归属于系统用户 1                                                             |
| T10  | **小明** 使用浏览器 **X** 匿名访问GrowingIO官网<br/>------------------------------------------<br/>设备 X 为系统用户 1<br/>在 event 表中记录该事件归属于系统用户 1                                               |

![](/img/用户模型-多用户使用相同设备.png)
