---
id: segment-profiles
sidebar_position: 1
---

# 群体画像

## 简介[](#jian-jie)

群体画像是通过一定的方法找到对应的用户群体并分析群体画像特征。

您可以通过以下三种方式创建用户群体：

* 通过特定规则提取用户群体，常用规则包含：

  * 找到做过某些事情的人群：比如过去 7 天完成过 3 次购物车结算
    
  * 找到具有某些特定属性的人群：比如年龄在 25 岁以下的男性
    
* 根据用户列表上传创建用户群体。

* 根据分析工具创建用户群体，如漏斗分析、留存分析和分布分析下钻群体画像。

## 名词解释[](#ming-ci-jie-shi)

### 基本信息

| 名词 | 解释 |
| -- | -- |
| 群体人数 | 当前最新一次群体画像计算结果中用户总人数 |
| 更新频次 | 群体画像计算频次<br/>手动更新：创建成功后一次性计算<br/>每日更新：创建成功后一次性计算，每日凌晨自动更新计算 |
| 计算状态 | 群体画像当前计算状态<br/>计算未开始：等待计算中<br/>计算中：群体画像计算中<br/>计算成功：群体画像计算完毕且计算成功<br/>计算失败：群体画像计算完毕且计算失败 |
| 创建方式 | 群体画像创建方式，分为以下几种：<br/>1. 规则创建<br/>2. 文件上传<br/>3. 漏斗创建<br/>4. 留存创建<br/>5. 分布分析创建 |

### 定义规则

| 名词 | 解释 |
| -- | -- |
| 用户行为 | 用户发生的行为信息，包含 **做过** 和 **未做过**<br/>做过：在指定时间范围内，发生过某个事件且满足统计规则的用户群体<br/>未做过：在指定时间范围内，未发生过某个事件的用户群体 |
| 用户属性 | 用户的属性特征信息，包含 **用户属性** 和 **用户标签** |

## 功能说明[](#gong-neng-shuo-ming)

### 群体画像列表页

在项目中，您可以在导航栏中看到 **用户洞察 > 群体画像**，点击进入群体画像列表页。

在群体画像列表页可以查看项目内创建的所有群体画像，并支持查看群体画像的名称、人数、更新频次、计算状态等基础信息。

您也可以对群体画像进行以下操作：

| 操作 | 步骤 | 限制条件 |
| -- | -- | -- |
| 搜索 | 您可以在搜索框中根据 **群体画像的名称** 搜索群体画像 | 无 |
| 新建 | 您可以点击 **新建群体画像** 创建群体画像 | 无 |
| 查看用户列表 | 您可以点击 **查看用户列表** 跳转到群体画像用户列表页 | 无 |
| 另存为 | 您可以点击 **另存为** 复制群体画像定义规则，修改并保存群体画像 | 仅规则创建的群体画像支持另存 |
| 下载用户ID | 您可以点击 **下载用户ID** 下载群体画像用户列表 | 仅包含用户ID列 | 
| 删除 | 您可以点击 **操作 > 删除**，删除不需要的群体画像 | 无 |

![](/img/用户洞察-群体画像.png)

### 群体画像详情页

在群体画像列表页，您可以点击 **群体画像名称** 进入群体画像详情页。

在群体画像详情页可以查看群体画像的基础信息和画像信息。

您可以可以对群体画像进行以下操作：

| 操作 | 步骤 | 限制条件 |
| -- | -- | -- |
| 查看规则 | 您可以点击 **查看规则** 查看群体画像定义规则 | 无 |
| 编辑 | 您可以点击 **编辑** 编辑群体画像定义规则 | 规则创建：仅支持修改名称、描述和定义规则<br/>文件上传：仅支持修改名称、描述<br/>漏斗创建：不支持修改<br/>留存创建：不支持修改<br/>分布分析创建：不支持修改 | 
| 删除 | 您可以点击 **操作 > 删除**，删除不需要的用户群体 | 无 |
| 查看用户列表 | 您可以点击 **查看用户列表** 查看群体用户列表 | 无 |  
| 添加画像图表 | 您可以点击 **添加画像图标** 在下方画像看板添加群体分析图表 | 无 |  

![](/img/用户洞察-群体画像-详情页.png)

### 群体画像用户列表页

在群体画像详情页，您可以点击 **查看用户列表** 进入群体画像用户列表页。

在群体画像用户列表页可以查看群体用户列表以及自定义查看用户身份、用户属性和用户标签。

您也可以对用户列表进行以下操作：

| 操作 | 步骤 | 限制条件 |
| -- | -- | -- |
| 查看用户详情 | 您可以通过点击 **用户 ID** 查看单用户详情 | 无 |
| 自定义用户身份展示 | 您可以通过勾选 “仅展示最终获取用户身份”<br/>选择用户身份展示形式 | 勾选：每个用户仅展示最终获取的用户身份<br/>未勾选：每个用户展示当前具有的全部用户身份 |
| 自定义列 | 您可以点击 **自定义列** 自定义用户列表<br/>可选择展示用户身份、用户属性和用户标签 | 最多支持选择20列 | 
| 下载当前列表 | 您可以点击 **下载当前列表** 下载当前自定义的用户列表 | 无 |

![](/img/用户洞察-群体画像-用户列表.png)

#### 仅展示最终获取用户身份

在实际业务中，一个用户可能具有多个终端的使用设备，如App、小程序、浏览器；也可能使用多个不同手机号。

在用户列表页中，如勾选 ”仅展示最终获取用户身份“，此时每个用户仅展示最终获取的用户身份。如下表：

| 用户 ID | 手机号 | 设备 ID |
| -- | -- | -- |
| C001 | m1 | X |
| C002 | m2 | Y | 
| ... | ... | ... |

如取消勾选 ”仅展示最终获取用户身份“，此时每个用户展示当前具有的全部用户身份。如下表：

| 用户 ID | 手机号 | 设备 ID |
| -- | -- | -- |
| C001 | [ 'm1' , 'm3' ] | [ 'X' , 'Z' ] |
| C002 | [ 'm2' , 'm4' ] | [ 'Y' , 'W' ] | 
| ... | ... | ... |

> 如需了解用户身份可阅读 [用户模型](/getting-started/basic-concept/user-model) 和 [数据模型-用户身份](/getting-started/basic-concept/data-model)

当使用群体画像下载进行用户运营或系统对接时，建议 **勾选** “仅展示最终获取用户身份”避免重复触达骚扰用户；

当使用群体画像下载用户列表进行用户名单查看等使用场景时，可 **取消勾选** “仅展示最终获取用户身份”以查看用户全部信息。

#### 自定义列

点击 **自定义列** 后可以看到自定义列弹窗，您可以进行以下操作：

* 搜索用户身份、用户属性和用户标签，并添加到自定义列中

![](/img/用户洞察-群体画像-用户列表-自定义列.png)

* 拖动、删除、清空用户身份、用户属性和用户标签

![](/img/用户洞察-群体画像-用户列表-自定义列-操作.png)









#### 分群计算规则

用户分群的规则计算时，会以全量系统用户作为全集进行计算。其中全量系统用户包括上传或历史导入GrowingIO系统并成功识别的用户。

| 计算规则 | 规则类型 | 说明 |
| -- | -- | -- |
| 用户行为 | 做过 | 含义：筛选全量用户中，在指定时间范围内，发生过某个事件且满足统计规则的全部用户<br/>操作：选择时间范围后，再选择做过，可继续选择预置事件、埋点事件或虚拟事件及其属性筛选条件、过滤条件<br/>*示例1：过去30天 做过 订单支付的金额总和 >100 过滤：城市=北京*<br/>*示例2：过去30天 做过 访问的次数综合 >0 过滤：用户价值标签=低价值* |
| 用户行为 | 未做过 | 含义：筛选全量用户中，在指定时间范围内，未发生过某个事件的全部用户<br/> 操作：选择时间范围后，再选择未做过，可继续选择预置事件、埋点事件或虚拟事件<br/>*示例：过去30天 未做过 虚拟事件_加入购物车* |
| 用户属性 | 用户是 | 含义：筛选全量用户中，在指定时间范围内，符合用户属性或用户标签规则的全部用户<br/> 操作：选择用户是后，继续选择用户属性或用户标签及其筛选条件<br/>*示例： 用户是 首次关注日期 在过去30天之内*  |

**说明**
- 仅添加 **未做过** 规则时，计算的结果人群可能较大，此时会弹窗二次确认，建议先进行预估人数计算后再创建分群，以便符合您的预期
- 若您想圈选出没做过某个事件的用户时，请选择 **未做过+事件** 进行筛选
  - 若选择 **做过 xx事件 次数=0** 时，会在发生过该事件的用户中进行统计，因此计算结果恒为0

规则创建分群时，支持添加多条规则和分组，且在用户行为规则后支持添加多条过滤条件，用于完成较复杂的人群圈选，如 *过去7天登录过且未添加购物车的来自北京的高价值用户*，计算规则如下：
- 在规则分组内的多条规则，通过**或**连接，计算结果取所有规则的**并集**作为最终人群
- 添加了多个分组时，各个分组之间通过**且**连接，先计算组内的结果，再计算各个分组的**交集**作为最终人群

##### 历史数据迁移

> 说明：由于分层规则的计算逻辑更新，在历史版本升级至2.3或以上版本时，部分分群的规则在前端显示会进行更新，分群的计算口径与历史数据不会变化

历史版本中的分群包含如下条件时，升级时会进行数据迁移：
- 分群规则中包括 做过 xx事件 次数=0
- 分群规则中包括 做过 xx事件 次数<N ，其中N为整数
- 分群规则中包括 做过 xx事件 次数≤N ，其中N为整数

###### 历史计算逻辑

历史版本中的用户分群在计算时，对于一些负向条件，会补充一条规则作为分群计算的基数，一般取规则中时间范围内的活跃用户作为计算基数。除以下规则外，其余规则均会按照实际逻辑进行计算。

负向条件包括如下三类：

| 负向规则类型               | 实际计算逻辑                                                        |
|----------------------------|---------------------------------------------------------------------|
| 过去N天 做过 xx事件 次数=0 | 过去N天 做过 xx事件次数=0 <br/> 且 **时间范围** 做过 任意事件天数>0 |
| 过去N天 xx事件 次数<N      | 过去N天 xx事件 次数＜N <br/> 且 **时间范围** 做过 任意事件天数>0    |
| 过去N天 xx事件 次数≤N      | 过去N天 xx事件 次数≤N <br/> 且 **时间范围** 做过 任意事件天数>0     |

其中 **时间范围** 的规则为：

>1.当第一条规则为肯定条件时，默认选择第一个肯定条件的时间范围活跃用户作为分群全集，并根据此全集计算分群用户；
>2.当分群第一个规则为负向条件时，默认选择第一个肯定条件的时间范围活跃用户作为分群全集，并根据此全集计算分群用户；
>3.当分群全部规则为负向条件时，默认选择第一个负向条件规则的时间范围活跃用户作为分群全集，并根据此全集计算分群用户。


###### 迁移规则

基于以上的历史计算逻辑，在升级新版本时，会将存在负向条件的规则进行转换，并在最后添加一条活跃用户规则。升级后，分群的计算口径与历史仍保持一致，不会变化。您可根据实际业务需要对分群进行新增或修改。

下面以 过去7天、访问事件为例，进行说明：

| 负向规则                 | 1.负向规则转换为                                    | 2.补充规则                      |
|--------------------------|-----------------------------------------------------|---------------------------------|
| 过去7天 做过 访问 次数=0 | <br/> 过去7天 未做过 访问<br/>                      | 且 时间范围 做过 任意事件天数>0 |
| 过去7天 访问 次数<N      | **过去7天 访问 次数＜N**<br/>或 过去7天 未做过 访问 | 且 时间范围 做过 任意事件天数>0 |
| 过去7天 访问 次数≤N      | 过去7天 访问 次数≤N <br/> 或 过去7天 未做过 访问    | 且 时间范围 做过 任意事件天数>0 |

> 当一个分群中存在多条负向条件时，仅会补充一条活跃用户规则

#### 上传用户列表[](#2-shang-chuan-yong-hu-lie-biao)

> 您可能遇到过这样的场景：
>
> 通过第三方系统举办了一场线上公开课，希望追踪报名并且参加了课程的用户后续在产品中的转化和使用情况。
>
> 这样的情况下如何可以在 GrowingIO 构建出目标用户分群以便分析这些用户在产品中的行为呢？就可以通过 "上传用户列表" 的方式。

在新建分群弹窗中选择“**文件上传创建**"，进入上传文件界面。

![](https://gblobscdn.gitbook.com/assets%2F-M2qbZInaXgdm8kkNosp%2F-M3f05PE2aifwnPNiTlY%2F-M3f2ZLFPshxvEuUjivG%2Fimage.png?alt=media&token=3618304b-2657-420c-b0ec-b60fc976d669)

新建用户分群页面

GrowingIO支持根据手机号、邮箱、UserID、OpenID、UnionID共5种类型的用户ID进行分群创建。

选择待上传ID的类别，拖动用户ID文件到上传框，在提示完成后单击继续，完成分群命名后单击保存，完成一个用户分群的创建。


### 群体画像详情页[](#qun-ti-hua-xiang-xiang-qing-ye)

![](https://gblobscdn.gitbook.com/assets%2F-M2qbZInaXgdm8kkNosp%2F-MiOgW6qdEzWgbbS5bNy%2F-MiOhR7gBiuMc_QNL2dX%2Fimage.png?alt=media&token=418ff9c2-41ca-45a1-ac0e-1c8614723273)

| 项         | 说明                                                                                                                                  |
|------------|---------------------------------------------------------------------------------------------------------------------------------------|
| 分群规则   | 创建分群时的规则，以且、或关系进行关联                                                                                                |
| 用户量     | 用户分群选定的目标用户群体数量，点击用户量可跳转到 [分群用户列表](./segment-profiles#分群用户列表)。 |
| 时间       | 群体画像的创建时间及最近一次计算时间                                                                                                  |
| 自定义维度 | 页面底部点击“**+**”按钮，可添加更多分群展示维度，支持添加常用维度及用户属性维度。<br/>支持筛选图表的日期范围，默认为最近30天。        |
| 编辑       | 修改当前分群的名称及分群规则，更新方式不可修改                                                                                        |
| 更多       | 1、另存为：对当前分群进行另存操作<br/>2、删除：点击删除该分群                                                                         |


### 分群用户列表[](#fen-qun-yong-hu-lie-biao)

在**群体画像详情页**点击用户数量按钮，跳转至分群用户列表。列表默认展示用户ID、UUID等信息，可自定义列选择其他的用户属性或用户标签字段。列表默认最多展示1000条数据，可通过下载用户用户列表获取列表所展示的所有字段。

![](https://gblobscdn.gitbook.com/assets%2F-M2qbZInaXgdm8kkNosp%2F-MjT_L-eew9kNgYR6OTS%2F-MjTapgvnxMLBpSQnQ2D%2Fimage.png?alt=media&token=9c4ca228-2160-4068-8242-ebc1b75dacbe)

| 项   | 说明  |
| --- | --- |
| 自定义列 | 可选择在列表中展示的其他用户属性，最多支持20列 |
| 下载  | 下载全部的用户的属性列。 |
| 用户ID | 固定展示不可删除，点击用户ID可查看该用户的 [360 画像](../../product-manual/user-insights/user-profiles) 。 |
